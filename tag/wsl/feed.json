{
    "version": "https://jsonfeed.org/version/1",
    "title": "null • All posts by \"wsl\" tag",
    "description": "(づ●─●)づ让我看看再学点什么好",
    "home_page_url": "https://www.taoidle.com",
    "items": [
        {
            "id": "https://www.taoidle.com/2024/12/20/WSL%E9%95%9C%E5%83%8F%E5%A4%8D%E5%88%B6%20&%20%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/",
            "url": "https://www.taoidle.com/2024/12/20/WSL%E9%95%9C%E5%83%8F%E5%A4%8D%E5%88%B6%20&%20%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/",
            "title": "WSL镜像复制 & 常用命令",
            "date_published": "2024-12-20T08:21:42.000Z",
            "content_html": "<h1 id=\"场景\"><a class=\"anchor\" href=\"#场景\">#</a> 场景</h1>\n<p>需要多开同个系统，比如开两个 Debian</p>\n<h1 id=\"流程\"><a class=\"anchor\" href=\"#流程\">#</a> 流程</h1>\n<ul>\n<li>注：以下以 Debian 为例</li>\n</ul>\n<h2 id=\"发行版设置\"><a class=\"anchor\" href=\"#发行版设置\">#</a> 发行版设置</h2>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 停止 Debian</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>wsl -t Debain</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>wsl --terminate Debian</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># 取消注册并删除 Debian</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>wsl --unregister Debian</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># 设置 Debian 为默认发行版</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>wsl --set-default Debian</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>wsl -s Debian</pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\"># 将 Debian 挪到喜欢的位置</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>wsl --mange Debian --move /path</pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\"># 将 Debian 设置为稀疏磁盘，允许自动回收磁盘空间</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>wsl --manage Debian -s <span class=\"token boolean\">true</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>wsl --manage Debian --set-sparse <span class=\"token boolean\">true</span></pre></td></tr></table></figure><h2 id=\"镜像导出\"><a class=\"anchor\" href=\"#镜像导出\">#</a> 镜像导出</h2>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 将 Debian 发行版导出为 debian-image.tar</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>wsl --export Debian debian-image.tar </pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># 将 Debian 发行版导出为 debian-image.vhdx</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>wsl --export Debian debian-image.vhdx --vhd</pre></td></tr></table></figure><h2 id=\"镜像导入\"><a class=\"anchor\" href=\"#镜像导入\">#</a> 镜像导入</h2>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 导入 debian-image.tar 镜像为 Debian-Main</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>wsl --import Debian-Main /path/to/install /path/to/debian-image.tar</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># 导入 debian-image.vhdx 镜像为 Debian-Main</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>wsl --import Debian-Main /path/to/install /path/to/debian-image.vhdx --vhd</pre></td></tr></table></figure><h1 id=\"常见问题\"><a class=\"anchor\" href=\"#常见问题\">#</a> 常见问题</h1>\n<ul>\n<li>\n<p>导出后的镜像登录默认为 root 而不是之前设置的普通用户？</p>\n<p>编辑 /etc/wsl.conf，添加配置</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>user<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token assign-left variable\">default</span><span class=\"token operator\">=</span>username</pre></td></tr></table></figure></li>\n</ul>\n",
            "tags": [
                "wsl"
            ]
        },
        {
            "id": "https://www.taoidle.com/2023/01/08/WSL%20%EF%BC%9ASystem%20has%20not%20been%20booted%20with%20systemd%20as%20init%20system%20(PID%201)/",
            "url": "https://www.taoidle.com/2023/01/08/WSL%20%EF%BC%9ASystem%20has%20not%20been%20booted%20with%20systemd%20as%20init%20system%20(PID%201)/",
            "title": "WSL ：System has not been booted with systemd as init system (PID 1)",
            "date_published": "2023-01-08T05:01:23.000Z",
            "content_html": "<h2 id=\"systemd-error\"><a class=\"anchor\" href=\"#systemd-error\">#</a> Systemd Error</h2>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>System has not been booted with systemd as init system <span class=\"token punctuation\">(</span>PID <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>. Can't operate.</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>Failed to connect to bus: Host is down</pre></td></tr></table></figure><h2 id=\"issue\"><a class=\"anchor\" href=\"#issue\">#</a> Issue</h2>\n<ul>\n<li>\n<p>Release of WSL doesn't support Systemd.</p>\n</li>\n<li>\n<p>Systemd is now officially supported in Ubuntu on many WSL systems.</p>\n</li>\n</ul>\n<h2 id=\"fix\"><a class=\"anchor\" href=\"#fix\">#</a> Fix</h2>\n<p>Start Ubuntu (or other Systemd) distribution under WSL</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">vim</span> /etc/wsl.conf</pre></td></tr></table></figure><p>Add the following:</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>boot<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token assign-left variable\">systemd</span><span class=\"token operator\">=</span>true</pre></td></tr></table></figure><p>Open Powershell:</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>wsl --shutdown</pre></td></tr></table></figure><p>or</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>wsl --terminate <span class=\"token operator\">&lt;</span>Distro<span class=\"token operator\">></span></pre></td></tr></table></figure><p>WSL List only distributions that are currently running:</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>wsl --list --running</pre></td></tr></table></figure><p>Start:</p>\n<p>Run the specified distribution.</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>wsl --distribution <span class=\"token operator\">&lt;</span>Distro<span class=\"token operator\">></span></pre></td></tr></table></figure>",
            "tags": [
                "wsl",
                "systemd"
            ]
        }
    ]
}