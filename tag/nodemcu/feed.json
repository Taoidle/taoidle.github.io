{
    "version": "https://jsonfeed.org/version/1",
    "title": "Taoidle • All posts by \"nodemcu\" tag",
    "description": "",
    "home_page_url": "https://www.taoidle.com",
    "items": [
        {
            "id": "https://www.taoidle.com/2021/06/10/clionplatformio%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E5%BC%80%E5%8F%91nodemcu/",
            "url": "https://www.taoidle.com/2021/06/10/clionplatformio%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E5%BC%80%E5%8F%91nodemcu/",
            "title": "CLion+PlatformIO环境搭建开发NodeMcu",
            "date_published": "2021-06-09T19:46:56.000Z",
            "content_html": "<h3 id=\"前言\"><a class=\"anchor\" href=\"#前言\">#</a> 前言</h3>\n<p>JB 家的东西实在是太好用了，丝毫不是因为我大半年没更新想水博客</p>\n<h3 id=\"准备环境\"><a class=\"anchor\" href=\"#准备环境\">#</a> 准备环境</h3>\n<ul>\n<li>Python3</li>\n<li>CLion</li>\n</ul>\n<h3 id=\"准备材料\"><a class=\"anchor\" href=\"#准备材料\">#</a> 准备材料</h3>\n<ul>\n<li>NodeMcu</li>\n<li>7 针 0.96 寸 OLED</li>\n<li>杜邦线若干</li>\n</ul>\n<h3 id=\"正文\"><a class=\"anchor\" href=\"#正文\">#</a> 正文</h3>\n<p>1. 在 Clion Plugins 里搜索安装 PlatformIO for CLion，安装完成后重启 CLion</p>\n<p><img data-src=\"/assets/images/1623260501-image-1623260500170.png\" alt=\"\" /></p>\n<p>2. 安装 PlatformIO Core (CLI)</p>\n<ul>\n<li>Windows\n<ol>\n<li>下载 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3BsYXRmb3JtaW8vcGxhdGZvcm1pby1jb3JlLWluc3RhbGxlci9tYXN0ZXIvZ2V0LXBsYXRmb3JtaW8ucHk=\">get-platformio.py</span></li>\n</ol>\n</li>\n</ul>\n<ol start=\"2\">\n<li>\n<p>打开 powershell</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">cd</span> C:<span class=\"token punctuation\">\\</span>path<span class=\"token punctuation\">\\</span>to<span class=\"token punctuation\">\\</span>dir<span class=\"token punctuation\">\\</span>where<span class=\"token punctuation\">\\</span>is<span class=\"token punctuation\">\\</span>located<span class=\"token punctuation\">\\</span>script<span class=\"token punctuation\">\\</span>get-platformio.py <span class=\"token comment\"># get-platformio.py 下载目录</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>python.exe get-platformio.py <span class=\"token comment\"># 运行脚本</span></pre></td></tr></table></figure></li>\n</ol>\n<ul>\n<li>\n<p>Linux/MacOS</p>\n<ol>\n<li>打开 terminal，下面命令三选一</li>\n</ol>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>python3 -c <span class=\"token string\">\"<span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">curl</span> -fsSL https://raw.githubusercontent.com/platformio/platformio/master/scripts/get-platformio.py<span class=\"token variable\">)</span></span>\"</span></pre></td></tr></table></figure><figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">curl</span> -fsSL https://raw.githubusercontent.com/platformio/platformio-core-installer/master/get-platformio.py -o get-platformio.py</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>python3 get-platformio.py</pre></td></tr></table></figure><figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">wget</span> https://raw.githubusercontent.com/platformio/platformio-core-installer/master/get-platformio.py -O get-platformio.py</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>python3 get-platformio.py</pre></td></tr></table></figure></li>\n</ul>\n<p>3.CLion 创建 PlatformIO NodeMcu 项目</p>\n<p><img data-src=\"/assets/images/1623263906-image-1623263905423.png\" alt=\"file\" /></p>\n<p><img data-src=\"/assets/images/1623264001-image-1623263999430.png\" alt=\"file\" /></p>\n<p><img data-src=\"/assets/images/1623264411-image-1623264410352.png\" alt=\"file\" /></p>\n<p>到此项目创建完成</p>\n<p>4. 配置 NodeMCU 项目</p>\n<ul>\n<li>\n<p>修改 CMakeLists.txt，将 main.cpp 添加到项目</p>\n<p><img data-src=\"/assets/images/1623264624-image-1623264622615.png\" alt=\"file\" /></p>\n</li>\n<li>\n<p>引入第三方库，如 U8g2</p>\n<p>在<span class=\"exturl\" data-url=\"aHR0cHM6Ly9wbGF0Zm9ybWlvLm9yZy9saWI=\"> platformio lib</span> 中搜索 U8g2 可以看到有两种安装方法</p>\n<ol>\n<li>在 CLion 中打开 terminal，输入 pio lib install &quot;olikraus/U8g2&quot;</li>\n<li>编辑 platformio.ini 文件，在末尾中加入下面配置，编译时自动安装</li>\n</ol>\n<pre><code>lib_deps = olikraus/U8g2 @ ^2.28.8\n</code></pre>\n</li>\n<li>\n<p>修改 CMakeLists.txt，将 U8g2 库添加到项目中</p>\n<p><img data-src=\"/assets/images/1623266913-image-1623266912048.png\" alt=\"file\" /></p>\n</li>\n<li>\n<p>修改项目编译配置</p>\n<p><img data-src=\"/assets/images/1623267020-image-1623267019679.png\" alt=\"file\" /></p>\n<p>把 build 删除</p>\n<p><img data-src=\"/assets/images/1623267165-image-1623267164884.png\" alt=\"file\" /></p>\n</li>\n<li>\n<p>修改串口监视器</p>\n<p><img data-src=\"/assets/images/1623267367-image-1623267366364.png\" alt=\"file\" /></p>\n<p><img data-src=\"/assets/images/1623267453-image-1623267452000.png\" alt=\"file\" /></p>\n</li>\n</ul>\n<p>5. 编写代码并编译上传到 NodeMCU</p>\n<p><img data-src=\"/assets/images/1623267695-image-1623267693765.png\" alt=\"file\" /></p>\n<p><img data-src=\"/assets/images/1623267853-image-1623267850897.png\" alt=\"file\" /></p>\n",
            "tags": [
                "arduino",
                "CLion",
                "esp8266",
                "nodemcu",
                "PlatformIO"
            ]
        },
        {
            "id": "https://www.taoidle.com/2020/02/28/%E4%BD%BF%E7%94%A8arduinovscode%E7%9A%84%E6%96%B9%E5%BC%8F%E5%BC%80%E5%8F%91nodemcu/",
            "url": "https://www.taoidle.com/2020/02/28/%E4%BD%BF%E7%94%A8arduinovscode%E7%9A%84%E6%96%B9%E5%BC%8F%E5%BC%80%E5%8F%91nodemcu/",
            "title": "使用Arduino+VsCode的方式开发Nodemcu",
            "date_published": "2020-02-28T09:40:36.000Z",
            "content_html": "<p><strong>前言</strong> 为什么用 Vscode？很简单，Arduino IDE 的编辑器不好用。废话不多说，来看怎么配置。 <strong>0、Nodemcu 连接电脑</strong> 根据你 Nodemcu 的版本打上串口驱动，如果是后期新购买的 Nodemcu 那驱动有两个版本，一个是 CH340 一个是 CP2102。安装完驱动程序后将 Nodemcu 连接电脑，在电脑的设备管理器中找到端口选项，如下图相似则安装成功。 <img data-src=\"/assets/images/11e3e749bddf136.png\" alt=\"\" /> <strong>1、安装配置 ArduinoIDE</strong> 在<span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5hcmR1aW5vLmNj\"> arduino 官网</span>下载对应系统版本的安装文件，下载安装 arduino IDE。 <img data-src=\"/assets/images/9cb2adac62db237.png\" alt=\"\" /> 打开 arduino IDE，左上角 File 选项，找到 Preferences，在 Preferences 窗口的 Settings 框中找到选项 Additional Boards Manager URLs，添加保存链接：<span class=\"exturl\" data-url=\"aHR0cDovL2FyZHVpbm8uZXNwODI2Ni5jb20vc3RhYmxlL3BhY2thZ2VfZXNwODI2NmNvbV9pbmRleC5qc29u\">http://arduino.esp8266.com/stable/package_esp8266com_index.json</span> <img data-src=\"/assets/images/75385e5626cb974.png\" alt=\"\" /> 左上角 Tools 选项，找到 Board，Boards Manager... ，在 Boards Manager 框中搜索 esp8266，下载 ESP8266 Community，由于我国网络环境这里下载非常缓慢，需要小工具加速，这里不再赘述。 <img data-src=\"/assets/images/f6a54e83be0f8a2.png\" alt=\"\" /> <strong>2、安装配置 VsCode</strong> <span class=\"exturl\" data-url=\"aHR0cHM6Ly9jb2RlLnZpc3VhbHN0dWRpby5jb20v\">VsCode 官网</span>下载对应系统版本的安装包安装 VsCode，打开 VsCode，在左边 Extensions 选项中搜索下载 Arduino 插件。 <img data-src=\"/assets/images/063850dde8de024.png\" alt=\"\" /> 在左上角选项 File-&gt;Preferences-&gt;Settings 进入设置页面，在 User 或者 Workspace 中找到 Arduino configuration，我们这里在 User 中配置，点击 Edit in settings.json <img data-src=\"/assets/images/e7eb7fdf1744d55.png\" alt=\"\" /> 在 settings.json 文件中添加以下内容，根据你的实际情况做改动。然后保存 settings.json</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token property\">\"arduino.path\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"D:\\\\Program Files (x86)\\\\Arduino\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 这里是你安装 Arduino 的文件路径</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token property\">\"C_Cpp.intelliSenseEngine\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Tag Parser\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token property\">\"editor.tabSize\"</span><span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token property\">\"editor.insertSpaces\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token property\">\"files.autoGuessEncoding\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token property\">\"arduino.logLevel\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"info\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token property\">\"editor.detectIndentation\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr></table></figure><p>接下来我们在电脑桌面创建一个 blink 文件夹，在 VsCode 中 File-&gt;Open Folder 打开这个文件夹，创建一个 blink.ino 文件 <img data-src=\"/assets/images/d728560e6db68b7.png\" alt=\"\" /> 在 VsCode 底部看到 COM6（你前边设备管理器中对应的串口号），在 COM6 旁边找到对应板型，点击搜索 Nodemcu，找到 1.0 版本选择保存 <img data-src=\"/assets/images/9fb83cc008f143d.png\" alt=\"\" /> <img data-src=\"/assets/images/8a03f6905cc7ee9.png\" alt=\"\" /> 在刚刚创建的 blink.ino 文件中编写代码如下</p>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">setup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token function\">pinMode</span><span class=\"token punctuation\">(</span>LED_BUILTIN<span class=\"token punctuation\">,</span>OUTPUT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">loop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token function\">digitalWrite</span><span class=\"token punctuation\">(</span>LED_BUILTIN<span class=\"token punctuation\">,</span>HIGH<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token function\">digitalWrite</span><span class=\"token punctuation\">(</span>LED_BUILTIN<span class=\"token punctuation\">,</span>LOW<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>保存 blink.ino，找到右上角上传图标，将文件编译烧写到 Nodemcu，烧写完成后 Nodemcu 上 LED 闪烁。 <img data-src=\"/assets/images/7092344df660ad5.png\" alt=\"\" /> <img data-src=\"/assets/images/3274fb883e94c2a.png\" alt=\"\" /></p>\n",
            "tags": [
                "vscode",
                "arduino",
                "esp8266",
                "nodemcu"
            ]
        }
    ]
}